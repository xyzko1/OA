@using OA.Model
@{
    Layout = null;
}
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script src="~/Content/LigerUI_V1.3.3/Source/lib/ligerUI/js/plugins/ligerLayout.js"></script>
    <script src="~/Content/LigerUI_V1.3.3/Source/indexdata.js"></script>
    <link href="~/Content/LigerUI_V1.3.3/Source/lib/ligerUI/skins/Aqua/css/ligerui-all.css" rel="stylesheet" type="text/css" />
    <script src="~/Content/LigerUI_V1.3.3/Source/lib/jquery/jquery-1.9.0.min.js" type="text/javascript"></script>
    <script src="~/Content/LigerUI_V1.3.3/Source/lib/ligerUI/js/core/base.js" type="text/javascript"></script>
    <script src="~/Content/LigerUI_V1.3.3  /Source/lib/ligerUI/js/plugins/ligerDrag.js" type="text/javascript"></script>
    <script src="~/Content/LigerUI_V1.3.3/Source/lib/ligerUI/js/plugins/ligerDialog.js" type="text/javascript"></script>
    <script src="~/Content/LigerUI_V1.3.3/Source/lib/ligerUI/js/plugins/ligerResizable.js" type="text/javascript"></script>
    <script src="~/Content/LigerUI_V1.3.3/Source/lib/ligerUI/js/ligerui.min.js"></script>
    <script src="~/Scripts/jquery.unobtrusive-ajax.js"></script>
    <style type="text/css">
        .l-case-title {
            font-weight: bold;
            margin-top: 20px;
            margin-bottom: 20px;
        }

        body, html {
            width: 100%;
            height: 100%;
        }

        * {
            margin: 0;
            padding: 0;
        }

        #winlinks {
            position: absolute;
            left: 20px;
            top: 20px;
            width: 100%;
        }

            #winlinks ul {
                position: relative;
            }

            #winlinks li {
                width: 70px;
                cursor: pointer;
                height: 80px;
                position: absolute;
                z-index: 101;
                list-style: none;
                text-align: center;
            }

                #winlinks li img {
                    width: 36px;
                    height: 36px;
                }

                #winlinks li span {
                    background: none repeat scroll 0 0 rgba(0, 0, 0, 0.3);
                    border-radius: 10px 10px 10px 10px;
                    display: block;
                    font-size: 12px;
                    margin-top: 1px;
                    color: White;
                    line-height: 18px;
                    text-align: center;
                }

                #winlinks li.l-over div.bg {
                    display: block;
                }

                #winlinks li div.bg {
                    display: none;
                    position: absolute;
                    top: -2px;
                    left: -2px;
                    z-index: 0;
                    width: 75px;
                    height: 64px;
                    -webkit-border-radius: 5px;
                    -moz-border-radius: 5px;
                    border-radius: 5px;
                    background: #000;
                    opacity: 0.1;
                    filter: alpha(opacity=10);
                }

        .l-taskbar-task-icon {
            top: 3px;
            left: 6px;
            background-image: none;
        }

        .l-taskbar-task-content {
            margin-left: 30px;
        }

        .l-taskbar-task-icon img {
            width: 22px;
            height: 22px;
        }

        #layout1 {
            width: 100%;
            margin: 40px;
            height: 400px;
            margin: 0;
            padding: 0;
        }
    </style>
    <script type="text/javascript">
        $(function () {
            $("#layout1").ligerLayout({ isLeftCollapse: true });
        });
    </script>
    <!--ZTree-->
    <script src="~/Content/zTree_v3/js/jquery.ztree.core.min.js"></script>
    <link href="~/Content/zTree_v3/css/demo.css" rel="stylesheet" />
    <link href="~/Content/zTree_v3/css/zTreeStyle/zTreeStyle.css" rel="stylesheet" />
    <script type="text/javascript">
        var setting = {
            callback: {
                onClick: zTreeOnClick
            }
        };
        function zTreeOnClick(event, treeId, treeNode) {
            alert(treeNode.tId + ", " + treeNode.name);
        };
        var zNodes = [
            {
                name: "父节点1 - 展开", open: true,
                children: [
                    {
                        name: "父节点11 - 折叠",
                        children: [
                            { name: "叶子节点111" },
                            { name: "叶子节点112" },
                            { name: "叶子节点113" },
                            { name: "叶子节点114" }
                        ]
                    },
                    {
                        name: "父节点12 - 折叠",
                        children: [
                            { name: "叶子节点121" },
                            { name: "叶子节点122" },
                            { name: "叶子节点123" },
                            { name: "叶子节点124" }
                        ]
                    },
                    { name: "父节点13 - 没有子节点", isParent: true }
                ]
            },
            {
                name: "父节点2 - 折叠",
                children: [
                    {
                        name: "父节点21 - 展开", open: true,
                        children: [
                            { name: "叶子节点211" },
                            { name: "叶子节点212" },
                            { name: "叶子节点213" },
                            { name: "叶子节点214" }
                        ]
                    },
                    {
                        name: "父节点22 - 折叠",
                        children: [
                            { name: "叶子节点221" },
                            { name: "叶子节点222" },
                            { name: "叶子节点223" },
                            { name: "叶子节点224" }
                        ]
                    },
                    {
                        name: "父节点23 - 折叠",
                        children: [
                            { name: "叶子节点231" },
                            { name: "叶子节点232" },
                            { name: "叶子节点233" },
                            { name: "叶子节点234" }
                        ]
                    }
                ]
            },
            { name: "父节点3 - 没有子节点", isParent: true }

        ];

        $(document).ready(function () {
            $.fn.zTree.init($("#treeDemo"), setting, zNodes);
        });
    </script>
</head>

<body style="padding:10px; ">
    <div style="background:url(../Content/images/Home/top.jpg)  repeat-x ;height:79px">
        <img src="../Content/images/Home/Alien Folder.png" style="float:left" />
        <h1 style="float:left;margin-top:30px">XX公司办公管理系统</h1>
        <h1 style="float:right;margin-top:30px;margin-right:40px" ;=;>欢迎 @ViewData["UName"] <a href="javascript:void(0)" id="logout" style="color:blue">退出</a></h1>
    </div>
    <div id="layout1">
        <div position="center" style="overflow: hidden; background: url(../Content/images/Home/applebg.jpg) no-repeat  center center;">
            <div id="winlinks">
                <ul></ul>
            </div>
        </div>
        @*<div position="left"  >
                <ul id="treeDemo" class="ztree"></ul>
            </div>*@
    </div>
    <script type="text/javascript">
        $(function () {
            $("#logout").click(function () {
                userLogout();
            });
        });
        //用户退出
        function userLogout() {
            $.post("/Home/logout", {}, function (data) { })
        }
    </script>
    <script type="text/javascript">
            if (window.parent.window != window) {
                window.top.location.href = "/UserLogin/Index";
            }

            var LINKWIDTH = 90, LINKHEIGHT = 90, TASKBARHEIGHT = 43;
            var winlinksul = $("#winlinks ul");
            function f_open(url, title, icon) {
                var win = $.ligerDialog.open(
                    {
                height: 500, url: url, width: 740, showMax: true, showToggle: true, showMin: true, isResize: true, modal: false, title: title, slide: false, buttons: [
                            {
                text: '确定', onclick: function (item, Dialog, index) {
                win.hide();
            }
                            }
                        ]
                    });
                var task = jQuery.ligerui.win.tasks[win.id];
                if (task) {
                $(".l-taskbar-task-icon:first", task).html('<img src="' + icon + '" />');
            }
                return win;
            }
            var links = [
                {icon: '../Content/images/Home/3DSMAX.png', title: '用户信息', url: '../UserInfo' },
                {icon: '../Content/images/Home/3DSMAX.png', title: '权限管理', url: '../ActionInfo' },
                {icon: '../Content/images/Home/3DSMAX.png', title: '角色管理', url: '../RoleInfo' },
                {icon: '../Content/images/Home/3DSMAX.png', title: '流程模板管理', url: '../WFTemp' },
                {icon: '../Content/images/Home/3DSMAX.png', title: '流程启动', url: '../WFInstance' }
            ];

            function onResize() {
                var linksHeight = $(window).height() - TASKBARHEIGHT;
                var winlinks = $("#winlinks");
                winlinks.height(linksHeight);
                var colMaxNumber = parseInt(linksHeight / LINKHEIGHT);//一列最多显示几个快捷方式
                for (var i = 0, l = links.length; i < l; i++) {
                    var link = links[i];
                    var jlink = $("li[linkindex=" + i + "]", winlinks);
                    var top = (i % colMaxNumber) * LINKHEIGHT, left = parseInt(i / colMaxNumber) * LINKWIDTH;
                    if (isNaN(top) || isNaN(left)) continue;
                    jlink.css({top: top, left: left });
                }

            }
            function linksInit() {
                for (var i = 0, l = links.length; i < l; i++) {
                    var link = links[i];
                    var jlink;
                    var jlink = $("<li></li>");
                    jlink.attr("linkindex", i);
                    jlink.append("<img src='" + link.icon + "' />");
                    jlink.append("<span>" + link.title + "</span>");
                    jlink.append("<div class='bg'></div>");
                    jlink.hover(function () {
                $(this).addClass("l-over");
            }, function () {
                $(this).removeClass("l-over");
            }).click(function () {
                        var linkindex = $(this).attr("linkindex");
                        var link = links[linkindex];
                        f_open(link.url, link.title, link.icon);
                    });
                    jlink.appendTo(winlinksul);
                }

            }

            $(window).resize(onResize);
            $.ligerui.win.removeTaskbar = function () {}; //不允许移除
            $.ligerui.win.createTaskbar(); //页面加载时创建任务栏

            linksInit();
            onResize();

    </script>
</body>

</html>

